@rendermode InteractiveServer
@inject ISnackbar Snackbar

<!-- Direct Flag Buttons for Language Selection -->
<MudStack Row="true" Spacing="1" AlignItems="AlignItems.Center">
    <!-- Denmark -->
    <MudTooltip Text="Dansk (Denmark)">
        <MudButton OnClick="@(() => ChangeLanguage("da", "Denmark"))"
                   Variant="@(_selectedLanguage == "da" ? Variant.Filled : Variant.Text)"
                   Color="@(_selectedLanguage == "da" ? Color.Primary : Color.Inherit)"
                   Size="Size.Small"
                   Style="min-width: 40px; padding: 4px 8px;">
            <MudText Style="font-size: 1.3rem;">ğŸ‡©ğŸ‡°</MudText>
        </MudButton>
    </MudTooltip>

    <!-- Germany -->
    <MudTooltip Text="Deutsch (Germany)">
        <MudButton OnClick="@(() => ChangeLanguage("de", "Germany"))"
                   Variant="@(_selectedLanguage == "de" ? Variant.Filled : Variant.Text)"
                   Color="@(_selectedLanguage == "de" ? Color.Primary : Color.Inherit)"
                   Size="Size.Small"
                   Style="min-width: 40px; padding: 4px 8px;">
            <MudText Style="font-size: 1.3rem;">ğŸ‡©ğŸ‡ª</MudText>
        </MudButton>
    </MudTooltip>

    <!-- Sweden -->
    <MudTooltip Text="Svenska (Sweden)">
        <MudButton OnClick="@(() => ChangeLanguage("sv", "Sweden"))"
                   Variant="@(_selectedLanguage == "sv" ? Variant.Filled : Variant.Text)"
                   Color="@(_selectedLanguage == "sv" ? Color.Primary : Color.Inherit)"
                   Size="Size.Small"
                   Style="min-width: 40px; padding: 4px 8px;">
            <MudText Style="font-size: 1.3rem;">ğŸ‡¸ğŸ‡ª</MudText>
        </MudButton>
    </MudTooltip>

    <!-- Norway -->
    <MudTooltip Text="Norsk (Norway)">
        <MudButton OnClick="@(() => ChangeLanguage("no", "Norway"))"
                   Variant="@(_selectedLanguage == "no" ? Variant.Filled : Variant.Text)"
                   Color="@(_selectedLanguage == "no" ? Color.Primary : Color.Inherit)"
                   Size="Size.Small"
                   Style="min-width: 40px; padding: 4px 8px;">
            <MudText Style="font-size: 1.3rem;">ğŸ‡³ğŸ‡´</MudText>
        </MudButton>
    </MudTooltip>

    <!-- Netherlands -->
    <MudTooltip Text="Nederlands (Netherlands)">
        <MudButton OnClick="@(() => ChangeLanguage("nl", "Netherlands"))"
                   Variant="@(_selectedLanguage == "nl" ? Variant.Filled : Variant.Text)"
                   Color="@(_selectedLanguage == "nl" ? Color.Primary : Color.Inherit)"
                   Size="Size.Small"
                   Style="min-width: 40px; padding: 4px 8px;">
            <MudText Style="font-size: 1.3rem;">ğŸ‡³ğŸ‡±</MudText>
        </MudButton>
    </MudTooltip>

    <!-- United Kingdom -->
    <MudTooltip Text="English (UK)">
        <MudButton OnClick="@(() => ChangeLanguage("en-gb", "United Kingdom"))"
                   Variant="@(_selectedLanguage == "en-gb" ? Variant.Filled : Variant.Text)"
                   Color="@(_selectedLanguage == "en-gb" ? Color.Primary : Color.Inherit)"
                   Size="Size.Small"
                   Style="min-width: 40px; padding: 4px 8px;">
            <MudText Style="font-size: 1.3rem;">ğŸ‡¬ğŸ‡§</MudText>
        </MudButton>
    </MudTooltip>

    <!-- Pirate -->
    <MudTooltip Text="Pirate (Arrr!)">
        <MudButton OnClick="@(() => ChangeLanguage("en-pirate", "Pirate"))"
                   Variant="@(_selectedLanguage == "en-pirate" ? Variant.Filled : Variant.Text)"
                   Color="@(_selectedLanguage == "en-pirate" ? Color.Primary : Color.Inherit)"
                   Size="Size.Small"
                   Style="min-width: 40px; padding: 4px 8px;">
            <MudText Style="font-size: 1.3rem;">ğŸ´â€â˜ ï¸</MudText>
        </MudButton>
    </MudTooltip>
</MudStack>

@code {
    private string _selectedLanguage = "da"; // Default to Danish since it's a Danish campsite system
    private string _selectedRegion = "Denmark";

    private void ChangeLanguage(string languageCode, string regionName)
    {
        _selectedLanguage = languageCode;
        _selectedRegion = regionName;

        // Show confirmation message
        Snackbar.Add($"Language/Region changed to {regionName}", Severity.Success, config =>
        {
            config.Icon = Icons.Material.Filled.Public;
            config.IconColor = Color.Success;
        });

        // In a real application, this would:
        // 1. Change the UI culture using CultureInfo
        // 2. Store preference in local storage or user profile
        // 3. Reload resources/translations
        // 4. Update currency and date formats

        // Example for future implementation:
        // var culture = new CultureInfo(languageCode);
        // CultureInfo.DefaultThreadCurrentCulture = culture;
        // CultureInfo.DefaultThreadCurrentUICulture = culture;
    }
}

