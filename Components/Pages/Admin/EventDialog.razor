@rendermode InteractiveServer

<MudDialog>
    <DialogContent>
        <MudGrid>
            <MudItem xs="12">
                <MudTextField @bind-Value="_name" 
                             Label="Event Name" 
                             Variant="Variant.Outlined"
                             Required="true" />
            </MudItem>

            <MudItem xs="12">
                <MudTextField @bind-Value="_description" 
                             Label="Description" 
                             Variant="Variant.Outlined"
                             Lines="3"
                             Required="true" />
            </MudItem>

            <MudItem xs="12" md="6">
                <MudSelect T="string" 
                          @bind-Value="_campsiteName" 
                          Label="Campsite" 
                          Variant="Variant.Outlined"
                          Required="true">
                    <MudSelectItem T="string" Value="@("Copenhagen Beach Camp")">Copenhagen Beach Camp</MudSelectItem>
                    <MudSelectItem T="string" Value="@("Skagen North Point")">Skagen North Point</MudSelectItem>
                    <MudSelectItem T="string" Value="@("Aarhus Forest Retreat")">Aarhus Forest Retreat</MudSelectItem>
                    <MudSelectItem T="string" Value="@("Odense Family Camp")">Odense Family Camp</MudSelectItem>
                    <MudSelectItem T="string" Value="@("Bornholm Island Camp")">Bornholm Island Camp</MudSelectItem>
                </MudSelect>
            </MudItem>

            <MudItem xs="12" md="6">
                <MudSelect T="string" 
                          @bind-Value="_category" 
                          Label="Category" 
                          Variant="Variant.Outlined"
                          Required="true">
                    <MudSelectItem T="string" Value="@("Sports")">Sports</MudSelectItem>
                    <MudSelectItem T="string" Value="@("Kids")">Kids</MudSelectItem>
                    <MudSelectItem T="string" Value="@("Entertainment")">Entertainment</MudSelectItem>
                    <MudSelectItem T="string" Value="@("Nature")">Nature</MudSelectItem>
                    <MudSelectItem T="string" Value="@("Wellness")">Wellness</MudSelectItem>
                    <MudSelectItem T="string" Value="@("Food & Dining")">Food & Dining</MudSelectItem>
                    <MudSelectItem T="string" Value="@("Workshop")">Workshop</MudSelectItem>
                </MudSelect>
            </MudItem>

            <MudItem xs="12" md="6">
                <MudDatePicker @bind-Date="_eventDate" 
                              Label="Event Date" 
                              Variant="Variant.Outlined"
                              MinDate="DateTime.Today"
                              Required="true" />
            </MudItem>

            <MudItem xs="12" md="6">
                <MudTimePicker @bind-Time="_eventTime" 
                              Label="Event Time" 
                              Variant="Variant.Outlined"
                              Required="true" />
            </MudItem>

            <MudItem xs="12" md="6">
                <MudNumericField @bind-Value="_maxCapacity" 
                                Label="Max Capacity" 
                                Variant="Variant.Outlined"
                                Min="0"
                                HelperText="Set to 0 for unlimited capacity" />
            </MudItem>

            <MudItem xs="12" md="6">
                <MudSelect T="string" 
                          @bind-Value="_status" 
                          Label="Status" 
                          Variant="Variant.Outlined"
                          Required="true">
                    <MudSelectItem T="string" Value="@("Open")">Open</MudSelectItem>
                    <MudSelectItem T="string" Value="@("Full")">Full</MudSelectItem>
                    <MudSelectItem T="string" Value="@("Cancelled")">Cancelled</MudSelectItem>
                </MudSelect>
            </MudItem>

            <MudItem xs="12">
                <MudTextField @bind-Value="_location" 
                             Label="Location (Optional)" 
                             Variant="Variant.Outlined"
                             Placeholder="e.g., Main Beach Area, Activity Center" />
            </MudItem>

            <MudItem xs="12">
                <MudTextField @bind-Value="_notes" 
                             Label="Additional Notes (Optional)" 
                             Variant="Variant.Outlined"
                             Lines="2"
                             Placeholder="Any special requirements or information" />
            </MudItem>
        </MudGrid>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel" Color="Color.Default">Cancel</MudButton>
        <MudButton OnClick="Submit" Color="Color.Primary" Variant="Variant.Filled">Save Event</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] IMudDialogInstance MudDialog { get; set; } = null!;
    [Parameter] public object? Event { get; set; }

    private string _name = "";
    private string _description = "";
    private string _campsiteName = "Copenhagen Beach Camp";
    private string _category = "Sports";
    private DateTime? _eventDate = DateTime.Today.AddDays(1);
    private TimeSpan? _eventTime = new TimeSpan(10, 0, 0);
    private int _maxCapacity = 0;
    private string _status = "Open";
    private string _location = "";
    private string _notes = "";

    protected override void OnInitialized()
    {
        if (Event != null)
        {
            // Load existing event data for editing
            // This will be implemented when we have the actual DTO
        }
    }

    private void Submit()
    {
        // Validate and save
        // TODO: Create event object and return to parent
        MudDialog.Close(DialogResult.Ok(true));
    }

    private void Cancel()
    {
        MudDialog.Cancel();
    }
}

